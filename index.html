<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TikTok GMV Profit Calculator (v2)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input[type="number"], input[type="text"] { width: 100px; margin: 3px; }
    table { border-collapse: collapse; }
    th, td { padding: 4px 8px; }
    .result { background: #eaffea; padding: 15px; margin-top: 20px; }
    button { margin-top: 10px; margin-right: 10px; }
  </style>
</head>
<body>

<h2>TikTok GMV Profit Calculator (v2)</h2>

<table border="1">
  <tr>
    <th>SKU Name</th><th>COGS (RM)</th><th>Unit Sold</th>
  </tr>
  <tr><td><input type="text" value="100g"/></td><td><input type="number" value="2.12"/></td><td><input type="number" value="78"/></td></tr>
  <tr><td><input type="text" value="200g"/></td><td><input type="number" value="3.46"/></td><td><input type="number" value="118"/></td></tr>
  <tr><td><input type="text" value="500g"/></td><td><input type="number" value="7.50"/></td><td><input type="number" value="70"/></td></tr>
  <tr><td><input type="text" value="100g + Susu"/></td><td><input type="number" value="3.11"/></td><td><input type="number" value="100"/></td></tr>
  <tr><td><input type="text" value="200g + Susu"/></td><td><input type="number" value="4.45"/></td><td><input type="number" value="220"/></td></tr>
  <tr><td><input type="text" value="500g + Susu"/></td><td><input type="number" value="8.49"/></td><td><input type="number" value="85"/></td></tr>
</table>

<p>Total GMV Revenue (RM): <input id="gmv" type="number" value="10316.99"/></p>
<p>Total Orders (Shipping): <input id="orders" type="number" value="734"/></p>
<p>Total Cancelled/Refund Orders (RM): <input id="refund" type="number" value="100"/></p>
<p>Total Ads Cost (RM): <input id="ads" type="number" value="1390.17"/></p>
<p>TikTok Fee (%): <input id="fee" type="number" value="15.66"/></p>
<p>Affiliate Fee (RM): <input id="affiliate" type="number" value="336.39"/></p>

<button onclick="calculate()">Kira Profit</button>
<button onclick="copyResults()">ðŸ“‹ Salin Keputusan</button>
<button onclick="window.print()">ðŸ“„ Cetak / Simpan ke PDF</button>

<div class="result" id="resultBox"></div>

<div style="text-align:left; margin-top:40px; font-size:14px; color:#444;">
  <p><strong>Nota:</strong> Kalkulator ini membolehkan anda menyemak untung rugi berdasarkan data GMV TikTok, termasuk fee platform dan affiliate.</p>
  <p>ðŸ“… <strong>Tarikh Dikira:</strong> 20/06/2025 14:12:36 (MYT)</p>
  <p>ðŸ“Œ TikTok Fee semasa: 15.66% daripada GMV<br>
     ðŸ“Œ Kos shipping dibayar pelanggan: RM 4.90/order<br>
     ðŸ“Œ Formula GMV sebenar = GMV â€“ Refund â€“ Shipping Paid</p>
</div>

<script>
function calculate() {
  const cogs = Array.from(document.querySelectorAll("tr input:nth-child(2)")).map(i => parseFloat(i.value) || 0);
  const units = Array.from(document.querySelectorAll("tr input:nth-child(3)")).map(i => parseFloat(i.value) || 0);
  const totalCOGS = cogs.reduce((acc, val, i) => acc + (val * units[i]), 0);
  const gmv = parseFloat(document.getElementById("gmv").value);
  const orders = parseFloat(document.getElementById("orders").value);
  const refund = parseFloat(document.getElementById("refund").value);
  const adsCost = parseFloat(document.getElementById("ads").value);
  const feePct = parseFloat(document.getElementById("fee").value);
  const affFee = parseFloat(document.getElementById("affiliate").value);
  const shippingPaid = orders * 4.9;
  const netGMV = gmv - shippingPaid - refund;
  const tiktokFee = gmv * (feePct / 100);
  const profit = netGMV - totalCOGS - adsCost - tiktokFee - affFee;
  const margin = (profit / netGMV) * 100;
  document.getElementById("resultBox").innerHTML = `
    Total COGS: RM ${totalCOGS.toFixed(2)}<br>
    Total Shipping Fee Paid: RM ${shippingPaid.toFixed(2)}<br>
    Net GMV: RM ${netGMV.toFixed(2)}<br>
    TikTok Fee: RM ${tiktokFee.toFixed(2)}<br>
    Affiliate Fee: RM ${affFee.toFixed(2)}<br><br>
    <strong>Total Profit: RM ${profit.toFixed(2)}</strong><br>
    <strong>Profit Margin: ${margin.toFixed(2)}%</strong>`;
}

function copyResults() {
  const results = document.getElementById("resultBox").innerText;
  navigator.clipboard.writeText(results).then(() => alert("Keputusan telah disalin!"));
}
</script>

</body>
</html>
